# 审批系统 - 前端技术实施文档

## 1. 技术概述

| 技术 | 版本 | 说明 |
|------|------|------|
| React | 18.x | 用户界面构建库 |
| Vite | 5.x | 下一代前端构建工具 |
| TypeScript | 5.x | JavaScript 的超集，提供类型安全 |
| React Router | 6.x | 路由管理 |
| Axios | 1.x | HTTP 客户端 |
| Zustand | 最新 | 轻量级状态管理 |

## 2. 项目初始化

### 2.1 创建项目

```bash
# 使用 pnpm 创建 Vite + React + TypeScript 项目
pnpm create vite@latest frontend --template react-ts
cd frontend
pnpm install
```

### 2.2 目录结构

```
frontend/
├── public/                    # 静态资源
├── src/
│   ├── assets/               # 项目资源
│   ├── components/           # 公共组件
│   │   ├── ui/               # 基础 UI 组件 (shadcn/ui)
│   │   ├── layout/           # 布局组件
│   │   └── business/         # 业务组件
│   ├── pages/                # 页面组件
│   ├── hooks/                # 自定义 Hooks
│   ├── services/             # API 服务
│   ├── stores/               # 状态管理
│   ├── types/                # TypeScript 类型定义
│   ├── utils/                # 工具函数
│   ├── constants/            # 常量定义
│   ├── styles/               # 全局样式
│   ├── App.tsx               # 应用根组件
│   └── main.tsx              # 入口文件
├── .env.development          # 开发环境变量
├── .env.production           # 生产环境变量
├── tsconfig.json             # TypeScript 配置
└── vite.config.ts            # Vite 配置
```

## 3. 核心配置

### 3.1 Vite 配置 (vite.config.ts)

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
      },
    },
  },
})
```

### 3.2 路径别名 (tsconfig.json)

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

## 4. Axios 封装

```typescript
// services/api.ts
import axios from 'axios'

const api = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000,
})

// 请求拦截器 - 添加 Token
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// 响应拦截器 - 统一错误处理
api.interceptors.response.use(
  (response) => response.data.data,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default api
```

## 5. 状态管理 (Zustand)

```typescript
// stores/authStore.ts
import { create } from 'zustand'
import { persist } from 'zustand/middleware'

interface AuthState {
  user: User | null
  token: string | null
  login: (user: User, token: string) => void
  logout: () => void
}

export const useAuthStore = create<AuthState>()(
  persist(
    (set) => ({
      user: null,
      token: null,
      login: (user, token) => set({ user, token }),
      logout: () => set({ user: null, token: null }),
    }),
    { name: 'auth-storage' }
  )
)
```

## 6. 开发命令

```bash
pnpm dev       # 启动开发服务器
pnpm build     # 构建生产版本
pnpm lint      # 代码检查
```
